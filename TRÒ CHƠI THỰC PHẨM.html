<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√≤ Ch∆°i H·ª©ng Th·ª±c Ph·∫©m</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            overflow: hidden;
        }

        .game-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }

        .header {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: white;
            z-index: 100;
        }

        .score {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .instructions {
            font-size: 16px;
            opacity: 0.9;
        }

        .game-area {
            position: absolute;
            top: 100px;
            left: 0;
            right: 0;
            bottom: 150px;
            overflow: hidden;
        }

        .food-item {
            position: absolute;
            font-size: 60px;
            animation: fall linear;
            cursor: pointer;
            transition: transform 0.1s;
            user-select: none;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .food-item:hover {
            transform: scale(1.2);
        }

        .food-item.selected {
            border: 4px solid yellow;
            border-radius: 50%;
            background: rgba(255, 255, 0, 0.2);
            transform: scale(1.3);
            z-index: 1000;
        }

        @keyframes fall {
            from {
                top: -50px;
            }
            to {
                top: calc(100vh - 100px);
            }
        }

        .baskets-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 150px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .basket {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            min-width: 120px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .basket:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.3);
        }

        .basket.correct {
            animation: correctFlash 0.5s;
        }

        .basket.wrong {
            animation: wrongFlash 0.5s;
        }

        @keyframes correctFlash {
            0%, 100% { background: rgba(255, 255, 255, 0.2); }
            50% { background: rgba(76, 175, 80, 0.6); }
        }

        @keyframes wrongFlash {
            0%, 100% { background: rgba(255, 255, 255, 0.2); }
            50% { background: rgba(244, 67, 54, 0.6); }
        }

        .basket-icon {
            font-size: 64px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .basket-label {
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 14px;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            z-index: 200;
        }

        .restart-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s;
        }

        .restart-btn:hover {
            background: #45a049;
        }

        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 14px;
            text-align: right;
        }

        .food-groups-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            z-index: 300;
            overflow-y: auto;
        }

        .modal-content {
            position: relative;
            max-width: 800px;
            margin: 50px auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            color: #333;
        }

        .food-groups-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .food-group {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #e9ecef;
        }

        .food-group h3 {
            margin: 0 0 15px 0;
            color: #495057;
            font-size: 18px;
            text-align: center;
        }

        .food-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .food-list span {
            background: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            border: 1px solid #dee2e6;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .close-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            margin-right: 10px;
            transition: background 0.3s;
        }

        .close-btn:hover {
            background: #5a6268;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div class="score">ƒêi·ªÉm: <span id="score">0</span></div>
            <div class="instructions">Nh·∫•p v√†o th·ª±c ph·∫©m r·ªìi nh·∫•p v√†o r·ªï ƒë√∫ng nh√≥m!</div>
        </div>

        <div class="controls">
            <div>Th·ªùi gian: <span id="timer">60</span>s</div>
        </div>

        <div class="game-area" id="gameArea"></div>

        <div class="baskets-container">
            <div class="basket" data-category="protein">
                <div class="basket-icon">üí™</div>
                <div class="basket-label">Gi√†u ƒê·∫°m</div>
            </div>
            <div class="basket" data-category="carbs">
                <div class="basket-icon">üåæ</div>
                <div class="basket-label">Gi√†u Tinh B·ªôt & ƒê∆∞·ªùng</div>
            </div>
            <div class="basket" data-category="fats">
                <div class="basket-icon">ü•ë</div>
                <div class="basket-label">Gi√†u Ch·∫•t B√©o</div>
            </div>
            <div class="basket" data-category="vitamins">
                <div class="basket-icon">üåà</div>
                <div class="basket-label">Gi√†u Vitamin & Kho√°ng Ch·∫•t</div>
            </div>
        </div>

        <div class="game-over" id="gameOver">
            <h2>Tr√≤ Ch∆°i K·∫øt Th√∫c!</h2>
            <p>ƒêi·ªÉm s·ªë c·ªßa b·∫°n: <span id="finalScore">0</span></p>
            <button class="restart-btn" onclick="showFoodGroups()">Xem Nh√≥m Th·ª±c Ph·∫©m</button>
            <button class="restart-btn" onclick="restartGame()">Ch∆°i L·∫°i</button>
        </div>

        <div class="food-groups-modal" id="foodGroupsModal">
            <div class="modal-content">
                <h2>C√°c Nh√≥m Th·ª±c Ph·∫©m Theo Dinh D∆∞·ª°ng</h2>
                <div class="food-groups-container">
                    <div class="food-group" data-category="protein">
                        <h3>üí™ Gi√†u ƒê·∫°m (Protein)</h3>
                        <div class="food-list">
                            <span>üçñ Th·ªãt heo</span>
                            <span>üêü C√°</span>
                            <span>ü•ö Tr·ª©ng</span>
                            <span>ü•õ S·ªØa</span>
                            <span>ü¶ê T√¥m</span>
                            <span>üçó Th·ªãt g√†</span>
                            <span>üêî G√†</span>
                        </div>
                    </div>
                    <div class="food-group" data-category="carbs">
                        <h3>üåæ Gi√†u Tinh B·ªôt & ƒê∆∞·ªùng (Carbs)</h3>
                        <div class="food-list">
                            <span>üçö C∆°m tr·∫Øng</span>
                            <span>üçû B√°nh m√¨</span>
                            <span>ü•î Khoai t√¢y</span>
                            <span>üåΩ Ng√¥</span>
                            <span>üçù M√¨ ·ªëng</span>
                            <span>üçû B√°nh m√¨ sandwich</span>
                            <span>üéã M√≠a</span>
                            <span>üç† Khoai lang</span>
                        </div>
                    </div>
                    <div class="food-group" data-category="fats">
                        <h3>ü•ë Gi√†u Ch·∫•t B√©o (Fats)</h3>
                        <div class="food-list">
                            <span>ü•ë Qu·∫£ b∆°</span>
                            <span>ü•ú ƒê·∫≠u ph·ªông</span>
                            <span>üßà B∆° l·∫°t</span>
                            <span>ü•• D·ª´a</span>
                            <span>üßÄ Ph√¥ mai</span>
                            <span>ü•ì Th·ªãt x√¥ng kh√≥i</span>
                            <span>üßÇ Mu·ªëi</span>
                            <span>üê∑ M·ª°</span>
                            <span>üå∞ V·ª´ng</span>
                        </div>
                    </div>
                    <div class="food-group" data-category="vitamins">
                        <h3>üåà Gi√†u Vitamin & Kho√°ng ch·∫•t</h3>
                        <div class="food-list">
                            <span>üçé T√°o ƒë·ªè</span>
                            <span>üçå Chu·ªëi</span>
                            <span>üçä Cam</span>
                            <span>ü•ï C√† r·ªët</span>
                            <span>ü•¨ Rau c·∫£i</span>
                            <span>üçÖ C√† chua</span>
                        </div>
                    </div>
                </div>
                <button class="close-btn" onclick="closeFoodGroups()">ƒê√≥ng</button>
                <button class="restart-btn" onclick="restartFromModal()">Ch∆°i L·∫°i</button>
            </div>
        </div>
    </div>

    <script>
        const foods = {
            protein: [
                {emoji: 'üçñ', name: 'Th·ªãt heo', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><rect x="10" y="15" width="30" height="20" rx="5" fill="#D2691E"/><rect x="8" y="18" width="6" height="14" rx="3" fill="#CD853F"/><rect x="36" y="18" width="6" height="14" rx="3" fill="#CD853F"/><circle cx="20" cy="22" r="2" fill="#8B4513"/><circle cx="30" cy="28" r="1.5" fill="#8B4513"/></svg>'},
                {emoji: 'üêü', name: 'C√°', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="25" rx="15" ry="8" fill="#4682B4"/><polygon points="10,25 5,20 5,30" fill="#4682B4"/><circle cx="35" cy="22" r="2" fill="white"/><circle cx="35" cy="22" r="1" fill="black"/><path d="M20 20 L30 15 L35 20 L30 25 Z" fill="#87CEEB"/></svg>'},
                {emoji: 'ü•ö', name: 'Tr·ª©ng', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="28" rx="12" ry="16" fill="white" stroke="#DDD" stroke-width="2"/><ellipse cx="25" cy="28" rx="10" ry="14" fill="#FFFACD"/></svg>'},
                {emoji: 'ü•õ', name: 'S·ªØa', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><rect x="15" y="10" width="20" height="30" rx="2" fill="white" stroke="#DDD" stroke-width="2"/><rect x="15" y="15" width="20" height="20" fill="#F0F8FF"/><rect x="18" y="8" width="14" height="4" rx="2" fill="#DDD"/></svg>'},
                {emoji: 'ü¶ê', name: 'T√¥m', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="25" rx="18" ry="6" fill="#FF6347" transform="rotate(-10 25 25)"/><circle cx="35" cy="22" r="2" fill="black"/><path d="M15 25 Q10 20 8 25 Q10 30 15 25" fill="#FF6347"/><line x1="20" y1="20" x2="18" y2="15" stroke="#FF4500" stroke-width="2"/><line x1="25" y1="19" x2="23" y2="14" stroke="#FF4500" stroke-width="2"/></svg>'},
                {emoji: 'üçó', name: 'Th·ªãt g√†', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="30" rx="12" ry="15" fill="#DEB887"/><ellipse cx="25" cy="25" rx="8" ry="10" fill="#F4A460"/><rect x="20" y="40" width="4" height="8" fill="#8B4513"/><rect x="26" y="40" width="4" height="8" fill="#8B4513"/></svg>'},
                {emoji: 'üêî', name: 'G√†', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="28" rx="10" ry="12" fill="#F4A460"/><circle cx="25" cy="20" r="8" fill="#DEB887"/><polygon points="15,20 10,18 15,22" fill="#FFA500"/><circle cx="22" cy="18" r="1.5" fill="black"/><polygon points="25,15 20,12 25,10 30,12" fill="#FF0000"/><rect x="22" y="35" width="3" height="8" fill="#FFA500"/><rect x="25" y="35" width="3" height="8" fill="#FFA500"/></svg>'}
            ],
            carbs: [
                {emoji: 'üçö', name: 'C∆°m tr·∫Øng', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="35" rx="15" ry="8" fill="#F5F5DC"/><ellipse cx="25" cy="30" rx="15" ry="8" fill="white"/><ellipse cx="25" cy="25" rx="15" ry="8" fill="#FFFACD"/></svg>'},
                {emoji: 'üçû', name: 'B√°nh m√¨', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="25" rx="18" ry="12" fill="#DEB887"/><ellipse cx="25" cy="22" rx="16" ry="10" fill="#F4A460"/><circle cx="18" cy="22" r="1" fill="#8B4513"/><circle cx="32" cy="25" r="1" fill="#8B4513"/><circle cx="25" cy="28" r="1" fill="#8B4513"/></svg>'},
                {emoji: 'ü•î', name: 'Khoai t√¢y', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="25" rx="15" ry="12" fill="#DEB887"/><circle cx="20" cy="20" r="1.5" fill="#8B4513"/><circle cx="30" cy="22" r="1" fill="#8B4513"/><circle cx="25" cy="30" r="1.5" fill="#8B4513"/><circle cx="32" cy="28" r="1" fill="#8B4513"/></svg>'},
                {emoji: 'üåΩ', name: 'Ng√¥', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><rect x="20" y="10" width="10" height="30" rx="5" fill="#FFD700"/><rect x="18" y="12" width="2" height="26" fill="#FFA500"/><rect x="30" y="12" width="2" height="26" fill="#FFA500"/><rect x="22" y="12" width="2" height="26" fill="#FFA500"/><rect x="26" y="12" width="2" height="26" fill="#FFA500"/><path d="M20 8 Q15 5 12 10 Q15 15 20 12" fill="#228B22"/></svg>'},
                {emoji: 'üçù', name: 'M√¨ ·ªëng', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="35" rx="15" ry="8" fill="#F5DEB3"/><path d="M15 25 Q20 15 25 25 Q30 15 35 25 Q30 35 25 25 Q20 35 15 25" fill="#FFE4B5"/><ellipse cx="25" cy="25" rx="12" ry="6" fill="#F0E68C"/></svg>'},
                {emoji: 'üçû', name: 'B√°nh m√¨ sandwich', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><rect x="10" y="20" width="30" height="15" rx="3" fill="#DEB887"/><rect x="12" y="22" width="26" height="3" fill="#228B22"/><rect x="12" y="26" width="26" height="2" fill="#FF6347"/><rect x="12" y="29" width="26" height="3" fill="#FFFF00"/></svg>'},
                {emoji: 'üéã', name: 'M√≠a', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><rect x="22" y="5" width="6" height="40" fill="#90EE90"/><rect x="20" y="8" width="10" height="3" fill="#228B22"/><rect x="20" y="15" width="10" height="3" fill="#228B22"/><rect x="20" y="22" width="10" height="3" fill="#228B22"/><rect x="20" y="29" width="10" height="3" fill="#228B22"/><rect x="20" y="36" width="10" height="3" fill="#228B22"/></svg>'},
                {emoji: 'üç†', name: 'Khoai lang', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="25" rx="18" ry="10" fill="#FF8C00"/><ellipse cx="25" cy="23" rx="15" ry="8" fill="#FFA500"/><circle cx="18" cy="22" r="1" fill="#8B4513"/><circle cx="32" cy="24" r="1" fill="#8B4513"/><circle cx="25" cy="28" r="1" fill="#8B4513"/></svg>'}
            ],
            fats: [
                {emoji: 'ü•ë', name: 'Qu·∫£ b∆°', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="28" rx="12" ry="16" fill="#228B22"/><ellipse cx="25" cy="28" rx="8" ry="12" fill="#90EE90"/><circle cx="25" cy="28" r="4" fill="#8B4513"/></svg>'},
                {emoji: 'ü•ú', name: 'ƒê·∫≠u ph·ªông', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="20" cy="25" rx="8" ry="12" fill="#DEB887" transform="rotate(-20 20 25)"/><ellipse cx="30" cy="25" rx="8" ry="12" fill="#DEB887" transform="rotate(20 30 25)"/><path d="M20 25 Q25 20 30 25 Q25 30 20 25" fill="#F4A460"/></svg>'},
                {emoji: 'üßà', name: 'B∆° l·∫°t', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><rect x="15" y="20" width="20" height="15" rx="2" fill="#FFD700"/><rect x="17" y="22" width="16" height="11" fill="#FFFF00"/><rect x="15" y="18" width="20" height="4" rx="2" fill="#F0E68C"/></svg>'},
                {emoji: 'ü••', name: 'D·ª´a', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><circle cx="25" cy="25" r="15" fill="#8B4513"/><circle cx="25" cy="25" r="12" fill="#F5DEB3"/><circle cx="20" cy="20" r="2" fill="#654321"/><circle cx="30" cy="20" r="2" fill="#654321"/><path d="M25 30 Q20 35 25 40 Q30 35 25 30" fill="#654321"/></svg>'},
                {emoji: 'üßÄ', name: 'Ph√¥ mai', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><polygon points="10,35 40,35 35,15 15,15" fill="#FFD700"/><circle cx="20" cy="25" r="2" fill="#FFA500"/><circle cx="30" cy="22" r="2.5" fill="#FFA500"/><circle cx="25" cy="30" r="1.5" fill="#FFA500"/></svg>'},
                {emoji: 'ü•ì', name: 'Th·ªãt x√¥ng kh√≥i', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><rect x="10" y="20" width="30" height="10" fill="#FF6347"/><rect x="10" y="22" width="30" height="2" fill="#FFB6C1"/><rect x="10" y="26" width="30" height="2" fill="#FFB6C1"/><rect x="10" y="18" width="30" height="2" fill="#8B0000"/></svg>'},
                {emoji: 'üßÇ', name: 'Mu·ªëi', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><rect x="15" y="15" width="20" height="25" rx="3" fill="white" stroke="#DDD" stroke-width="2"/><rect x="18" y="12" width="14" height="6" rx="2" fill="#E0E0E0"/><circle cx="20" cy="25" r="1" fill="#F0F0F0"/><circle cx="30" cy="22" r="1" fill="#F0F0F0"/><circle cx="25" cy="30" r="1" fill="#F0F0F0"/><circle cx="22" cy="35" r="1" fill="#F0F0F0"/></svg>'},
                {emoji: 'üê∑', name: 'M·ª°', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="25" rx="15" ry="10" fill="#FFB6C1"/><ellipse cx="25" cy="23" rx="12" ry="8" fill="#FFC0CB"/><circle cx="20" cy="20" r="1.5" fill="#FF69B4"/><circle cx="30" cy="20" r="1.5" fill="#FF69B4"/><ellipse cx="25" cy="22" rx="3" ry="2" fill="#FF1493"/></svg>'},
                {emoji: 'üå∞', name: 'V·ª´ng', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="25" rx="12" ry="8" fill="#DEB887"/><circle cx="20" cy="22" r="1.5" fill="#F5DEB3"/><circle cx="30" cy="23" r="1" fill="#F5DEB3"/><circle cx="25" cy="28" r="1.5" fill="#F5DEB3"/><circle cx="22" cy="26" r="1" fill="#F5DEB3"/><circle cx="28" cy="27" r="1" fill="#F5DEB3"/><circle cx="26" cy="24" r="1" fill="#F5DEB3"/></svg>'}
            ],
            vitamins: [
                {emoji: 'üçé', name: 'T√°o ƒë·ªè', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><circle cx="25" cy="28" r="15" fill="#FF0000"/><circle cx="22" cy="25" r="12" fill="#FF4500"/><ellipse cx="20" cy="22" rx="3" ry="6" fill="#FFB6C1"/><rect x="24" y="10" width="2" height="8" fill="#8B4513"/><path d="M26 10 Q30 8 32 12 Q28 15 26 12" fill="#228B22"/></svg>'},
                {emoji: 'üçå', name: 'Chu·ªëi', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><path d="M15 40 Q20 10 25 15 Q30 20 35 40 Q30 45 25 40 Q20 45 15 40" fill="#FFD700"/><path d="M18 38 Q22 15 25 18 Q28 22 32 38" fill="#FFFF00"/><rect x="24" y="12" width="2" height="6" fill="#8B4513"/></svg>'},
                {emoji: 'üçä', name: 'Cam', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><circle cx="25" cy="25" r="15" fill="#FFA500"/><circle cx="25" cy="25" r="12" fill="#FF8C00"/><circle cx="22" cy="22" r="1" fill="#FF6347"/><circle cx="28" cy="20" r="1" fill="#FF6347"/><circle cx="30" cy="28" r="1" fill="#FF6347"/><rect x="24" y="8" width="2" height="6" fill="#228B22"/></svg>'},
                {emoji: 'ü•ï', name: 'C√† r·ªët', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><polygon points="25,40 20,15 30,15" fill="#FF8C00"/><polygon points="25,38 22,18 28,18" fill="#FFA500"/><path d="M20 15 Q18 10 15 12 Q18 8 20 15" fill="#228B22"/><path d="M25 15 Q23 8 20 10 Q25 5 25 15" fill="#228B22"/><path d="M30 15 Q32 10 35 12 Q32 8 30 15" fill="#228B22"/></svg>'},
                {emoji: 'ü•¨', name: 'Rau c·∫£i', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><ellipse cx="25" cy="35" rx="12" ry="8" fill="#90EE90"/><ellipse cx="20" cy="25" rx="8" ry="12" fill="#228B22"/><ellipse cx="30" cy="25" rx="8" ry="12" fill="#228B22"/><ellipse cx="25" cy="20" rx="6" ry="10" fill="#32CD32"/></svg>'},
                {emoji: 'üçÖ', name: 'C√† chua', svg: '<svg width="50" height="50" viewBox="0 0 50 50"><circle cx="25" cy="28" r="15" fill="#FF6347"/><circle cx="25" cy="25" r="12" fill="#FF4500"/><ellipse cx="22" cy="22" rx="2" ry="4" fill="#FFB6C1"/><path d="M20 12 Q25 8 30 12 Q28 15 25 12 Q22 15 20 12" fill="#228B22"/></svg>'}
            ]
        };

        let score = 0;
        let mistakes = 0;
        let timeLeft = 60;
        let gameActive = true;
        let gameTimer;
        let spawnTimer;
        let collectedFoods = {
            protein: [],
            carbs: [],
            fats: [],
            vitamins: []
        };

        function startGame() {
            score = 0;
            mistakes = 0;
            timeLeft = 60;
            gameActive = true;
            selectedFood = null;
            
            // Reset danh s√°ch th·ª±c ph·∫©m ƒë√£ h·ª©ng
            collectedFoods = {
                protein: [],
                carbs: [],
                fats: [],
                vitamins: []
            };
            
            updateDisplay();
            
            // B·∫Øt ƒë·∫ßu ƒë·∫øm ng∆∞·ª£c th·ªùi gian
            gameTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
            
            // B·∫Øt ƒë·∫ßu t·∫°o th·ª±c ph·∫©m r∆°i
            spawnFood();
            spawnTimer = setInterval(spawnFood, 2000);
        }

        function spawnFood() {
            if (!gameActive) return;
            
            const categories = Object.keys(foods);
            const randomCategory = categories[Math.floor(Math.random() * categories.length)];
            const randomFood = foods[randomCategory][Math.floor(Math.random() * foods[randomCategory].length)];
            
            const foodElement = document.createElement('div');
            foodElement.className = 'food-item';
            foodElement.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; background: rgba(255,255,255,0.9); border-radius: 10px; padding: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
                    ${randomFood.svg}
                    <div style="font-size: 16px; font-weight: bold; color: #333; margin-top: 4px; text-align: center;">${randomFood.name}</div>
                </div>
            `;
            foodElement.dataset.category = randomCategory;
            foodElement.style.left = Math.random() * (window.innerWidth - 80) + 'px';
            foodElement.style.animationDuration = (Math.random() * 3 + 4) + 's';
            
            // Th√™m s·ª± ki·ªán nh·∫•p chu·ªôt
            foodElement.addEventListener('click', selectFood);
            
            document.getElementById('gameArea').appendChild(foodElement);
            
            // X√≥a th·ª±c ph·∫©m sau khi r∆°i xu·ªëng
            setTimeout(() => {
                if (foodElement.parentNode) {
                    foodElement.parentNode.removeChild(foodElement);
                }
            }, 7000);
        }

        let selectedFood = null;

        function selectFood(e) {
            if (!gameActive) return;
            
            // B·ªè ch·ªçn th·ª±c ph·∫©m c≈©
            if (selectedFood) {
                selectedFood.classList.remove('selected');
            }
            
            // T√¨m ph·∫ßn t·ª≠ th·ª±c ph·∫©m ch√≠nh (c√≥ class food-item)
            selectedFood = e.target.closest('.food-item');
            selectedFood.classList.add('selected');
            
            showMessage('B√¢y gi·ªù nh·∫•p v√†o r·ªï ƒë√∫ng!');
        }

        function getCurrentFoodData(foodElement) {
            const category = foodElement.dataset.category;
            const foodName = foodElement.querySelector('div div').textContent;
            
            // T√¨m th·ª±c ph·∫©m trong danh s√°ch
            for (let food of foods[category]) {
                if (food.name === foodName) {
                    return food;
                }
            }
            return null;
        }

        function handleBasketClick(e) {
            if (!selectedFood || !gameActive) return;
            
            const basket = e.currentTarget;
            const basketCategory = basket.dataset.category;
            const foodCategory = selectedFood.dataset.category;
            
            if (basketCategory === foodCategory) {
                // ƒê√∫ng
                score += 1;
                basket.classList.add('correct');
                showMessage('Ch√≠nh x√°c! +1 ƒëi·ªÉm');
                
                // L∆∞u th·ª±c ph·∫©m ƒë√£ h·ª©ng ƒë∆∞·ª£c
                const foodData = getCurrentFoodData(selectedFood);
                if (foodData && !collectedFoods[foodCategory].some(f => f.name === foodData.name)) {
                    collectedFoods[foodCategory].push(foodData);
                }
                
                setTimeout(() => basket.classList.remove('correct'), 500);
            } else {
                // Sai - kh√¥ng tr·ª´ ƒëi·ªÉm
                mistakes++;
                basket.classList.add('wrong');
                showMessage('Sai r·ªìi! Th·ª≠ l·∫°i nh√©!');
                
                setTimeout(() => basket.classList.remove('wrong'), 500);
            }
            
            // X√≥a th·ª±c ph·∫©m ƒë√£ ch·ªçn
            if (selectedFood.parentNode) {
                selectedFood.parentNode.removeChild(selectedFood);
            }
            selectedFood = null;
            
            updateDisplay();
        }

        function showMessage(text) {
            const existingMessage = document.querySelector('.message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const message = document.createElement('div');
            message.className = 'message';
            message.textContent = text;
            message.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                font-size: 16px;
                z-index: 150;
                animation: fadeOut 2s forwards;
            `;
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeOut {
                    0% { opacity: 1; }
                    70% { opacity: 1; }
                    100% { opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(message);
            
            setTimeout(() => {
                if (message.parentNode) {
                    message.parentNode.removeChild(message);
                }
            }, 2000);
        }

        // X·ª≠ l√Ω nh·∫•p chu·ªôt v√†o r·ªï
        document.querySelectorAll('.basket').forEach(basket => {
            basket.addEventListener('click', handleBasketClick);
        });

        function updateDisplay() {
            document.getElementById('score').textContent = score;
        }

        function endGame() {
            gameActive = false;
            clearInterval(gameTimer);
            clearInterval(spawnTimer);
            
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameOver').style.display = 'block';
            
            // X√≥a t·∫•t c·∫£ th·ª±c ph·∫©m c√≤n l·∫°i
            document.querySelectorAll('.food-item').forEach(food => {
                food.parentNode.removeChild(food);
            });
        }

        function restartGame() {
            document.getElementById('gameOver').style.display = 'none';
            
            // X√≥a t·∫•t c·∫£ th·ª±c ph·∫©m
            document.querySelectorAll('.food-item').forEach(food => {
                food.parentNode.removeChild(food);
            });
            
            startGame();
        }

        function showFoodGroups() {
            updateFoodGroupsDisplay();
            document.getElementById('foodGroupsModal').style.display = 'block';
        }

        function updateFoodGroupsDisplay() {
            const foodLists = document.querySelectorAll('.food-list');
            
            foodLists.forEach(list => {
                const category = list.parentElement.dataset.category;
                const caughtFoods = collectedFoods[category] || [];
                
                // X√≥a n·ªôi dung c≈©
                list.innerHTML = '';
                
                if (caughtFoods.length === 0) {
                    list.innerHTML = '<span style="color: #999; font-style: italic;">Ch∆∞a h·ª©ng ƒë∆∞·ª£c th·ª±c ph·∫©m n√†o</span>';
                } else {
                    caughtFoods.forEach(food => {
                        const span = document.createElement('span');
                        span.innerHTML = `${food.svg} ${food.name}`;
                        list.appendChild(span);
                    });
                }
            });
        }

        function closeFoodGroups() {
            document.getElementById('foodGroupsModal').style.display = 'none';
        }

        function restartFromModal() {
            document.getElementById('foodGroupsModal').style.display = 'none';
            document.getElementById('gameOver').style.display = 'none';
            
            // X√≥a t·∫•t c·∫£ th·ª±c ph·∫©m
            document.querySelectorAll('.food-item').forEach(food => {
                food.parentNode.removeChild(food);
            });
            
            startGame();
        }

        // B·∫Øt ƒë·∫ßu tr√≤ ch∆°i khi t·∫£i trang
        startGame();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'992236b370fbfe8a',t:'MTc2MTA2NTAwNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
